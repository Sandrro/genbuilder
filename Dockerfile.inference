FROM mambaorg/micromamba:1.5.3

SHELL ["/bin/bash","-lc"]
WORKDIR /app

COPY environment-inference.yml environment.yml

RUN micromamba install -y -n base -f environment.yml && \
    micromamba clean -a -y

COPY . .
EXPOSE 8000
ENTRYPOINT ["uvicorn", "api:app", "--host", "0.0.0.0", "--port", "8000"]
